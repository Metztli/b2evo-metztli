/*!
 * jQuery Raty - A Star Rating Plugin - http://wbotelhos.com/raty
 * 
 * @author  Washington Botelho
 * @twitter wbotelhos
 * @version 1.4.3
 * 
 * Licensed under The MIT License
 * http://opensource.org/licenses/mit-license.php
 * 
 */

(function(a){function k(a){if(window.console&&window.console.log){window.console.log(a)}}function j(b,c,d){var e=undefined;if(c==undefined){k("Specify an ID or class to be the target of the action.");return}if(c){if(c.indexOf(".")>=0){var f;return a(c).each(function(){f="#"+a(this).attr("id");if(d=="start"){a.fn.raty.start(b,f)}else if(d=="click"){a.fn.raty.click(b,f)}else if(d=="readOnly"){a.fn.raty.readOnly(b,f)}})}e=a(c);if(!e.length){k('"'+c+'" is a invalid identifier for the public funtion $.fn.raty.'+d+"().");return}}return e}function i(b,c,d){var e=b.attr("id"),f=Math.ceil(c),g=(f-c).toFixed(1);if(g>.25&&g<=.75){f=f-.5;a("span#"+e+"-"+Math.ceil(f)).removeClass(starOff).removeClass(starOn).addClass(starHalf)}else if(g>.75){f--}else{a("span#"+e+"-"+f).removeClass(starOff).addClass(starOn)}}function h(a,b,c){if(a!==null){var d=b;if(c.targetType=="hint"){if(b==0&&c.cancel){d=c.cancelHint}else{d=c.hintList[b-1]}}if(f(a)){a.val(d)}else{a.html(d)}}}function g(b,c,f){var g=b.attr("id");if(isNaN(parseInt(c))){b.children("span."+g).removeClass(f.starOn).addClass(f.starOff);a("input#"+g+"-score").removeAttr("value");return}if(c<0){c=0}else if(c>f.number){c=f.number}d(g,c,f);if(c>0){a("input#"+g+"-score").val(c);if(f.half){i(b,c,f)}}if(f.readOnly||b.css("cursor")=="default"){e(b,c,f)}}function f(a){return a.is("input")||a.is("select")||a.is("textarea")}function e(a,b,c){var d="";if(b!=0){b=parseInt(b);d=b>0&&c.number<=c.hintList.length&&c.hintList[b-1]!==null?c.hintList[b-1]:b}else{d=c.noRatedMsg}a.attr("title",d).children("span").attr("title",d)}function d(b,c,d){var e=a("span."+b).length,f=0,g=0,h,i=d.starOn,j=d.starOff;for(var k=1;k<=e;k++){h=a("span#"+b+"-"+k);if(k<=c){if(d.iconRange&&d.iconRange.length>f){i=d.iconRange[f][0];g=d.iconRange[f][1];if(k<=g){h.removeClass(j).addClass(i)}if(k==g){f++}}else{h.removeClass(j).addClass(i)}}else{h.removeClass(i).addClass(j)}}}function c(a,b,c){if(a!==null){var d="";if(c.targetKeep){d=b.val();if(c.targetType=="hint"){if(b.val()==""&&c.cancel){d=c.cancelHint}else{d=c.hintList[Math.ceil(b.val())-1]}}}if(f(a)){a.val(d)}else{a.html(d)}}}function b(b,e,f){var j=b.attr("id"),k=a("input#"+j+"-score"),l=b.children("span."+j);b.mouseleave(function(){g(b,k.val(),e);c(f,k,e)});l.bind(e.half?"mousemove":"mouseover",function(c){d(j,a(this).attr("alt"),e);if(e.half){var g=parseFloat(((c.pageX-a(this).offset().left)/e.size).toFixed(1));g=g>=0&&g<.5?.5:1;b.data("score",parseFloat(a(this).attr("alt"))+g-1);i(b,b.data("score"),e)}else{d(j,a(this).attr("alt"),e)}h(f,a(this).attr("alt"),e)}).click(function(c){k.val(e.half?b.data("score"):a(this).attr("alt"));if(e.click){e.click.apply(b,[k.val(),c])}})}a.fn.raty=function(c){if(this.length==0){k("Selector invalid or missing!");return}else if(this.length>1){return this.each(function(){a.fn.raty.apply(a(this),[c])})}var f=a.extend({},a.fn.raty.defaults,c),g=a(this),j=this.attr("id"),l=0,m=f.starOn,n="",o=f.target,p=f.width?f.width:f.number*f.size+f.number*4;if(j===undefined){j="raty-"+g.index();g.attr("id",j)}if(f.number>20){f.number=20}else if(f.number<0){f.number=0}g.data("options",f);if(!isNaN(parseInt(f.start))&&f.start>0){l=f.start>f.number?f.number:f.start}for(var q=1;q<=f.number;q++){m=l>=q?f.starOn:f.starOff;n=q<=f.hintList.length&&f.hintList[q-1]!==null?f.hintList[q-1]:q;g.append('<span id="'+j+"-"+q+'" alt="'+q+'" title="'+n+'" class="'+j+" "+m+'"></span>').append(q<f.number?" ":"")}if(f.iconRange&&l>0){d(j,l,f)}var r=a("<input/>",{id:j+"-score",type:"hidden",name:f.scoreName}).appendTo(g);if(l>0){r.val(l)}if(f.half){i(g,a("input#"+j+"-score").val(),f)}if(!f.readOnly){if(o!==null){o=a(o);if(o.length==0){k("Target selector invalid or missing!")}}if(f.cancel){var s=a("span."+j),t='<span alt="x" title="'+f.cancelHint+'" class="button-cancel '+f.cancelOff+'"/>';if(f.cancelPlace=="left"){g.prepend(t+" ")}else{g.append(" ").append(t)}a("#"+j+" span.button-cancel").mouseenter(function(){a(this).removeClass(f.cancelOff).addClass(f.cancelOn);s.removeClass(f.starOn).addClass(f.starOff);h(o,"",f)}).mouseleave(function(){a(this).removeClass(f.cancelOn).addClass(f.cancelOff);g.mouseout()}).click(function(b){a("input#"+j+"-score").removeAttr("value");if(f.click){f.click.apply(g,[null,b])}});g.css("width",p+f.size+4)}else{g.css("width",p)}g.css("cursor","pointer");b(g,f,o)}else{g.css("cursor","default");e(g,l,f)}return g};a.fn.raty.cancel=function(b,c){var d=c===undefined?false:true;if(d){return a.fn.raty.click("",b,"cancel")}else{return a.fn.raty.start("",b,"cancel")}};a.fn.raty.click=function(b,c){var d=j(b,c,"click"),e=a(c).data("options");if(c.indexOf(".")>=0){return}g(d,b,e);if(e.click){e.click.apply(d,[b])}else{k('You must add the "click: function(score, evt) { }" callback.')}return d};a.fn.raty.readOnly=function(c,d){var e=j(c,d,"readOnly"),f=a(d).data("options"),g=e.children("span.button-cancel");if(d.indexOf(".")>=0){return}if(g[0]){c?g.hide():g.show()}if(c){a("span."+e.attr("id")).unbind();e.css("cursor","default").unbind()}else{b(e,f);e.css("cursor","pointer")}return e};a.fn.raty.start=function(b,c){var d=j(b,c,"start"),e=a(c).data("options");if(c.indexOf(".")>=0){return}g(d,b,e);return d};a.fn.raty.defaults={cancel:false,cancelHint:"cancel this rating!",cancelOff:"raty_cancel_off",cancelOn:"raty_cancel_on",cancelPlace:"left",click:null,half:false,hintList:["bad","poor","regular","good","gorgeous"],noRatedMsg:"not rated yet",number:5,iconRange:[],readOnly:false,scoreName:"score",size:16,starHalf:"raty_star_half",starOff:"raty_star_off",starOn:"raty_star_on",start:0,target:null,targetKeep:false,targetType:"hint",width:null}})(jQuery)